{"ast":null,"code":"import { useRef, useEffect } from 'react';\nconst DEFAULT_EVENTS = [\"mousedown\", \"touchstart\"];\n\nfunction useClickOutside(handler, events, nodes) {\n  const ref = useRef();\n  useEffect(() => {\n    const listener = event => {\n      const {\n        target\n      } = event != null ? event : {};\n\n      if (Array.isArray(nodes)) {\n        const shouldIgnore = (target == null ? void 0 : target.hasAttribute(\"data-ignore-outside-clicks\")) || !document.body.contains(target);\n        const shouldTrigger = nodes.every(node => !!node && !node.contains(target));\n        shouldTrigger && !shouldIgnore && handler();\n      } else if (ref.current && !ref.current.contains(target)) {\n        handler();\n      }\n    };\n\n    (events || DEFAULT_EVENTS).forEach(fn => document.addEventListener(fn, listener));\n    return () => {\n      (events || DEFAULT_EVENTS).forEach(fn => document.removeEventListener(fn, listener));\n    };\n  }, [ref, handler, nodes]);\n  return ref;\n}\n\nexport { useClickOutside };","map":{"version":3,"sources":["../../src/use-click-outside/use-click-outside.ts"],"names":[],"mappings":";AACA,MAAM,cAAc,GAAG,CAAC,WAAD,EAAc,YAAd,CAAvB;;AACO,SAAS,eAAT,CAAyB,OAAzB,EAAkC,MAAlC,EAA0C,KAA1C,EAAiD;AACtD,QAAM,GAAG,GAAG,MAAM,EAAlB;AACA,EAAA,SAAS,CAAC,MAAM;AACd,UAAM,QAAQ,GAAI,KAAD,IAAW;AAC1B,YAAM;AAAE,QAAA;AAAF,UAAa,KAAK,IAAI,IAAT,GAAgB,KAAhB,GAAwB,EAA3C;;AACA,UAAI,KAAK,CAAC,OAAN,CAAc,KAAd,CAAJ,EAA0B;AACxB,cAAM,YAAY,GAAG,CAAC,MAAM,IAAI,IAAV,GAAiB,KAAK,CAAtB,GAA0B,MAAM,CAAC,YAAP,CAAoB,4BAApB,CAA3B,KAAiF,CAAC,QAAQ,CAAC,IAAT,CAAc,QAAd,CAAuB,MAAvB,CAAvG;AACA,cAAM,aAAa,GAAG,KAAK,CAAC,KAAN,CAAa,IAAD,IAAU,CAAC,CAAC,IAAF,IAAU,CAAC,IAAI,CAAC,QAAL,CAAc,MAAd,CAAjC,CAAtB;AACA,QAAA,aAAa,IAAI,CAAC,YAAlB,IAAkC,OAAO,EAAzC;AACD,OAJD,MAIO,IAAI,GAAG,CAAC,OAAJ,IAAe,CAAC,GAAG,CAAC,OAAJ,CAAY,QAAZ,CAAqB,MAArB,CAApB,EAAkD;AACvD,QAAA,OAAO;AACR;AACF,KATD;;AAUA,KAAC,MAAM,IAAI,cAAX,EAA2B,OAA3B,CAAoC,EAAD,IAAQ,QAAQ,CAAC,gBAAT,CAA0B,EAA1B,EAA8B,QAA9B,CAA3C;AACA,WAAO,MAAM;AACX,OAAC,MAAM,IAAI,cAAX,EAA2B,OAA3B,CAAoC,EAAD,IAAQ,QAAQ,CAAC,mBAAT,CAA6B,EAA7B,EAAiC,QAAjC,CAA3C;AACD,KAFD;AAGD,GAfQ,EAeN,CAAC,GAAD,EAAM,OAAN,EAAe,KAAf,CAfM,CAAT;AAgBA,SAAO,GAAP;AACF","sourcesContent":["import { useEffect, useRef } from 'react';\n\nconst DEFAULT_EVENTS = ['mousedown', 'touchstart'];\n\nexport function useClickOutside<T extends HTMLElement = any>(\n  handler: () => void,\n  events?: string[] | null,\n  nodes?: HTMLElement[]\n) {\n  const ref = useRef<T>();\n\n  useEffect(() => {\n    const listener = (event: any) => {\n      const { target } = event ?? {};\n      if (Array.isArray(nodes)) {\n        const shouldIgnore =\n          target?.hasAttribute('data-ignore-outside-clicks') || !document.body.contains(target);\n        const shouldTrigger = nodes.every((node) => !!node && !node.contains(target));\n        shouldTrigger && !shouldIgnore && handler();\n      } else if (ref.current && !ref.current.contains(target)) {\n        handler();\n      }\n    };\n\n    (events || DEFAULT_EVENTS).forEach((fn) => document.addEventListener(fn, listener));\n\n    return () => {\n      (events || DEFAULT_EVENTS).forEach((fn) => document.removeEventListener(fn, listener));\n    };\n  }, [ref, handler, nodes]);\n\n  return ref;\n}\n"]},"metadata":{},"sourceType":"module"}