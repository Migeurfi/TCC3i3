{"ast":null,"code":"import React from 'react';\nimport { useId, useClickOutside } from '@mantine/hooks';\nimport { getDefaultZIndex, useComponentDefaultProps, useMantineTheme, StylesApiProvider } from '@mantine/styles';\nimport { usePopover } from './use-popover.js';\nimport { PopoverContextProvider } from './Popover.context.js';\nimport { PopoverTarget } from './PopoverTarget/PopoverTarget.js';\nimport { PopoverDropdown } from './PopoverDropdown/PopoverDropdown.js';\nimport { getFloatingPosition } from '../Floating/get-floating-position/get-floating-position.js';\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\n\nvar __objRest = (source, exclude) => {\n  var target = {};\n\n  for (var prop in source) if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0) target[prop] = source[prop];\n\n  if (source != null && __getOwnPropSymbols) for (var prop of __getOwnPropSymbols(source)) {\n    if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop)) target[prop] = source[prop];\n  }\n  return target;\n};\n\nconst defaultProps = {\n  position: \"bottom\",\n  offset: 8,\n  positionDependencies: [],\n  transition: \"fade\",\n  transitionDuration: 150,\n  middlewares: {\n    flip: true,\n    shift: true\n  },\n  arrowSize: 7,\n  arrowOffset: 5,\n  closeOnClickOutside: true,\n  withinPortal: false,\n  closeOnEscape: true,\n  trapFocus: false,\n  withRoles: true,\n  clickOutsideEvents: [\"mousedown\", \"touchstart\"],\n  zIndex: getDefaultZIndex(\"popover\"),\n  __staticSelector: \"Popover\"\n};\n\nfunction Popover(props) {\n  const _a = useComponentDefaultProps(\"Popover\", defaultProps, props),\n        {\n    children,\n    position,\n    offset,\n    onPositionChange,\n    positionDependencies,\n    opened,\n    transition,\n    transitionDuration,\n    width,\n    middlewares,\n    withArrow,\n    arrowSize,\n    arrowOffset,\n    unstyled,\n    classNames,\n    styles,\n    closeOnClickOutside,\n    withinPortal,\n    closeOnEscape,\n    clickOutsideEvents,\n    trapFocus,\n    onClose,\n    onOpen,\n    onChange,\n    zIndex,\n    radius,\n    shadow,\n    id,\n    defaultOpened,\n    exitTransitionDuration,\n    __staticSelector,\n    withRoles\n  } = _a,\n        others = __objRest(_a, [\"children\", \"position\", \"offset\", \"onPositionChange\", \"positionDependencies\", \"opened\", \"transition\", \"transitionDuration\", \"width\", \"middlewares\", \"withArrow\", \"arrowSize\", \"arrowOffset\", \"unstyled\", \"classNames\", \"styles\", \"closeOnClickOutside\", \"withinPortal\", \"closeOnEscape\", \"clickOutsideEvents\", \"trapFocus\", \"onClose\", \"onOpen\", \"onChange\", \"zIndex\", \"radius\", \"shadow\", \"id\", \"defaultOpened\", \"exitTransitionDuration\", \"__staticSelector\", \"withRoles\"]);\n\n  const uid = useId(id);\n  const theme = useMantineTheme();\n  const popover = usePopover({\n    middlewares,\n    width,\n    position: getFloatingPosition(theme.dir, position),\n    offset: offset + (withArrow ? arrowSize / 2 : 0),\n    onPositionChange,\n    positionDependencies,\n    opened,\n    defaultOpened,\n    onChange,\n    onOpen,\n    onClose\n  });\n  useClickOutside(() => closeOnClickOutside && popover.onClose(), clickOutsideEvents, [popover.floating.refs.floating.current, popover.floating.refs.reference.current]);\n  return /* @__PURE__ */React.createElement(StylesApiProvider, {\n    classNames,\n    styles,\n    unstyled,\n    staticSelector: __staticSelector\n  }, /* @__PURE__ */React.createElement(PopoverContextProvider, {\n    value: {\n      controlled: popover.controlled,\n      reference: popover.floating.reference,\n      floating: popover.floating.floating,\n      x: popover.floating.x,\n      y: popover.floating.y,\n      opened: popover.opened,\n      transition,\n      transitionDuration,\n      exitTransitionDuration,\n      width,\n      withArrow,\n      arrowSize,\n      arrowOffset,\n      placement: popover.floating.placement,\n      trapFocus,\n      withinPortal,\n      zIndex,\n      radius,\n      shadow,\n      closeOnEscape,\n      onClose: popover.onClose,\n      onToggle: popover.onToggle,\n      getTargetId: () => `${uid}-target`,\n      getDropdownId: () => `${uid}-dropdown`,\n      withRoles,\n      targetProps: others\n    }\n  }, children));\n}\n\nPopover.Target = PopoverTarget;\nPopover.Dropdown = PopoverDropdown;\nPopover.displayName = \"@mantine/core/Popover\";\nexport { Popover };","map":{"version":3,"sources":["../../src/Popover/Popover.tsx"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable react/no-unused-prop-types */\n\nimport React from 'react';\nimport { useId, useClickOutside } from '@mantine/hooks';\nimport {\n  useMantineTheme,\n  ClassNames,\n  Styles,\n  StylesApiProvider,\n  MantineNumberSize,\n  MantineShadow,\n  getDefaultZIndex,\n  useComponentDefaultProps,\n} from '@mantine/styles';\nimport { MantineTransition } from '../Transition';\nimport { getFloatingPosition, FloatingPosition } from '../Floating';\nimport { usePopover } from './use-popover';\nimport { PopoverContextProvider } from './Popover.context';\nimport {\n  PopoverWidth,\n  PopoverMiddlewares,\n  PopoverStylesNames,\n  PopoverStylesParams,\n} from './Popover.types';\nimport { PopoverTarget } from './PopoverTarget/PopoverTarget';\nimport { PopoverDropdown } from './PopoverDropdown/PopoverDropdown';\n\nexport interface PopoverBaseProps {\n  /** Dropdown position relative to target */\n  position?: FloatingPosition;\n\n  /** Space between target element and dropdown in px */\n  offset?: number;\n\n  /** Called when dropdown position changes */\n  onPositionChange?(position: FloatingPosition): void;\n\n  /** useEffect dependencies to force update dropdown position */\n  positionDependencies?: any[];\n\n  /** Called when dropdown closes */\n  onClose?(): void;\n\n  /** Called when dropdown opens */\n  onOpen?(): void;\n\n  /** One of premade transitions ot transition object */\n  transition?: MantineTransition;\n\n  /** Transition duration in ms */\n  transitionDuration?: number;\n\n  /** Exit transition duration in ms */\n  exitTransitionDuration?: number;\n\n  /** Dropdown width, or 'target' to make dropdown width the same as target element */\n  width?: PopoverWidth;\n\n  /** Floating ui middlewares to configure position handling */\n  middlewares?: PopoverMiddlewares;\n\n  /** Determines whether component should have an arrow */\n  withArrow?: boolean;\n\n  /** Arrow size in px */\n  arrowSize?: number;\n\n  /** Arrow offset in px */\n  arrowOffset?: number;\n\n  /** Determines whether dropdown should be rendered within Portal, defaults to false */\n  withinPortal?: boolean;\n\n  /** Dropdown z-index */\n  zIndex?: React.CSSProperties['zIndex'];\n\n  /** Radius from theme.radius or number to set border-radius in px */\n  radius?: MantineNumberSize;\n\n  /** Key of theme.shadow or any other valid css box-shadow value */\n  shadow?: MantineShadow;\n}\n\nexport interface PopoverProps extends PopoverBaseProps {\n  /** Popover.Target and Popover.Dropdown components */\n  children: React.ReactNode;\n\n  /** Initial opened state for uncontrolled component */\n  defaultOpened?: boolean;\n\n  /** Controls dropdown opened state */\n  opened?: boolean;\n\n  /** Called with current state when dropdown opens or closes */\n  onChange?(opened: boolean): void;\n\n  /** Determines whether dropdown should be closed on outside clicks, default to true */\n  closeOnClickOutside?: boolean;\n\n  /** Events that trigger outside clicks */\n  clickOutsideEvents?: string[];\n\n  /** Determines whether focus should be trapped within dropdown, default to false */\n  trapFocus?: boolean;\n\n  /** Determines whether dropdown should be closed when Escape key is pressed, defaults to true */\n  closeOnEscape?: boolean;\n\n  /** id base to create accessibility connections */\n  id?: string;\n\n  /** Determines whether dropdown and target element should have accessible roles, defaults to true */\n  withRoles?: boolean;\n\n  unstyled?: boolean;\n  classNames?: ClassNames<PopoverStylesNames>;\n  styles?: Styles<PopoverStylesNames, PopoverStylesParams>;\n  __staticSelector?: string;\n}\n\nconst defaultProps: Partial<PopoverProps> = {\n  position: 'bottom',\n  offset: 8,\n  positionDependencies: [],\n  transition: 'fade',\n  transitionDuration: 150,\n  middlewares: { flip: true, shift: true },\n  arrowSize: 7,\n  arrowOffset: 5,\n  closeOnClickOutside: true,\n  withinPortal: false,\n  closeOnEscape: true,\n  trapFocus: false,\n  withRoles: true,\n  clickOutsideEvents: ['mousedown', 'touchstart'],\n  zIndex: getDefaultZIndex('popover'),\n  __staticSelector: 'Popover',\n};\n\nexport function Popover(props: PopoverProps) {\n  const {\n    children,\n    position,\n    offset,\n    onPositionChange,\n    positionDependencies,\n    opened,\n    transition,\n    transitionDuration,\n    width,\n    middlewares,\n    withArrow,\n    arrowSize,\n    arrowOffset,\n    unstyled,\n    classNames,\n    styles,\n    closeOnClickOutside,\n    withinPortal,\n    closeOnEscape,\n    clickOutsideEvents,\n    trapFocus,\n    onClose,\n    onOpen,\n    onChange,\n    zIndex,\n    radius,\n    shadow,\n    id,\n    defaultOpened,\n    exitTransitionDuration,\n    __staticSelector,\n    withRoles,\n    ...others\n  } = useComponentDefaultProps('Popover', defaultProps, props);\n\n  const uid = useId(id);\n  const theme = useMantineTheme();\n  const popover = usePopover({\n    middlewares,\n    width,\n    position: getFloatingPosition(theme.dir, position),\n    offset: offset + (withArrow ? arrowSize / 2 : 0),\n    onPositionChange,\n    positionDependencies,\n    opened,\n    defaultOpened,\n    onChange,\n    onOpen,\n    onClose,\n  });\n\n  useClickOutside(() => closeOnClickOutside && popover.onClose(), clickOutsideEvents, [\n    popover.floating.refs.floating.current,\n    popover.floating.refs.reference.current as any,\n  ]);\n\n  return (\n    <StylesApiProvider\n      classNames={classNames}\n      styles={styles}\n      unstyled={unstyled}\n      staticSelector={__staticSelector}\n    >\n      <PopoverContextProvider\n        value={{\n          controlled: popover.controlled,\n          reference: popover.floating.reference,\n          floating: popover.floating.floating,\n          x: popover.floating.x,\n          y: popover.floating.y,\n          opened: popover.opened,\n          transition,\n          transitionDuration,\n          exitTransitionDuration,\n          width,\n          withArrow,\n          arrowSize,\n          arrowOffset,\n          placement: popover.floating.placement,\n          trapFocus,\n          withinPortal,\n          zIndex,\n          radius,\n          shadow,\n          closeOnEscape,\n          onClose: popover.onClose,\n          onToggle: popover.onToggle,\n          getTargetId: () => `${uid}-target`,\n          getDropdownId: () => `${uid}-dropdown`,\n          withRoles,\n          targetProps: others,\n        }}\n      >\n        {children}\n      </PopoverContextProvider>\n    </StylesApiProvider>\n  );\n}\n\nPopover.Target = PopoverTarget;\nPopover.Dropdown = PopoverDropdown;\nPopover.displayName = '@mantine/core/Popover';\n"]},"metadata":{},"sourceType":"module"}